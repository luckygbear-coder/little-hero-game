<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>å°å‹‡è€…ä¹‹æ—…å¤§å†’éšª - Little Hero Game</title>
  <style>
    /* -------- åŸºç¤è¨­å®š -------- */
    * {
      box-sizing: border-box;
    }
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
    }
    body {
      font-family: "Noto Sans TC", -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(180deg, #ffeec9 0%, #ffe9f2 40%, #e4f2ff 100%);
      color: #333;
    }
    a {
      color: inherit;
      text-decoration: none;
    }

    /* -------- App å¤–æ¡† -------- */
    .app {
      max-width: 480px;
      margin: 0 auto;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* -------- ä¸Šæ–¹æ¨™é¡Œåˆ— -------- */
    .app-header {
      position: sticky;
      top: 0;
      z-index: 20;
      background: rgba(255, 248, 224, 0.95);
      backdrop-filter: blur(8px);
      border-bottom: 1px solid rgba(225, 182, 118, 0.5);
      padding: 8px 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .app-header-logo {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #fff8c7 0, #ffd46a 40%, #ffb347 75%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }
    .app-header-text {
      display: flex;
      flex-direction: column;
    }
    .app-header-title {
      font-size: 1rem;
      font-weight: 700;
    }
    .app-header-sub {
      font-size: 0.8rem;
      color: #666;
    }

    /* -------- å…§å®¹å€ -------- */
    .app-main {
      flex: 1;
      padding: 12px 12px 72px;
    }

    .section {
      margin-bottom: 16px;
    }
    .card {
      background: #fff7e6;
      border-radius: 16px;
      border: 2px solid #e1b676;
      box-shadow: 0 3px 8px rgba(0,0,0,0.12);
      padding: 16px;
    }
    .card + .card {
      margin-top: 12px;
    }
    h1, h2, h3 {
      margin: 0 0 8px;
      text-align: center;
    }
    h1 {
      font-size: 1.5rem;
    }
    h2 {
      font-size: 1.25rem;
    }
    p {
      margin: 4px 0;
      line-height: 1.6;
    }

    .badge {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 0.75rem;
      background: #ffe08a;
      margin-bottom: 6px;
    }

    /* -------- æŒ‰éˆ• -------- */
    .btn-row {
      display: flex;
      gap: 8px;
      margin-top: 8px;
      flex-wrap: wrap;
    }
    .btn {
      flex: 1;
      padding: 10px 6px;
      border-radius: 999px;
      border: none;
      font-size: 1.05rem;
      cursor: pointer;
      background: #ffcc66;
      transition: transform 0.1s, box-shadow 0.1s, background 0.1s;
      text-align: center;
      white-space: nowrap;
    }
    .btn:active {
      transform: translateY(1px);
      box-shadow: 0 1px 3px rgba(0,0,0,0.15) inset;
    }
    .btn-secondary {
      background: #ffd8e2;
      font-size: 0.95rem;
    }
    .btn-ghost {
      background: #fff;
      border: 1px dashed #e1b676;
      font-size: 0.85rem;
    }

    /* -------- é¦–é åˆ—è¡¨ -------- */
    .list {
      padding-left: 20px;
      margin: 4px 0;
      font-size: 0.95rem;
    }

    /* -------- å‹‡è€…å¡ç‰‡ -------- */
    .hero-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px;
      margin-top: 8px;
    }
    .hero-card {
      background: #fff;
      border-radius: 14px;
      border: 1px solid #ffd38a;
      padding: 8px;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      gap: 2px;
      cursor: pointer;
      transition: transform 0.1s, box-shadow 0.1s, border-color 0.1s;
      font-size: 0.9rem;
    }
    .hero-card-title {
      font-weight: 700;
      font-size: 0.95rem;
    }
    .hero-card-line {
      font-size: 0.8rem;
      color: #555;
    }
    .hero-card-tag {
      font-size: 0.75rem;
      padding: 2px 6px;
      border-radius: 999px;
      background: #ffe9b5;
      margin-top: 4px;
    }
    .hero-card.selected {
      border-color: #ff922b;
      box-shadow: 0 0 0 2px rgba(255, 146, 43, 0.35);
      transform: translateY(-1px);
    }

    .hero-summary {
      margin-top: 8px;
      padding: 8px;
      border-radius: 12px;
      background: #fff;
      font-size: 0.9rem;
      color: #555;
    }

    /* -------- å£æƒ…ç·’é€²åº¦æ¢ï¼ˆå°æ€ª / é­”ç‹å…±ç”¨æ¨£å¼ï¼Œå„è‡ªæœ‰å®¹å™¨ï¼‰ -------- */
    .emotion-steps {
      display: flex;
      justify-content: space-between;
      gap: 4px;
      margin: 10px 0 4px;
      font-size: 0.7rem;
    }
    .emotion-step {
      flex: 1;
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2px;
    }
    .emotion-dot {
      width: 16px;
      height: 16px;
      border-radius: 999px;
      border: 2px solid #ffb3c1;
      background: #fff;
    }
    .emotion-step.current .emotion-dot {
      background: #ffccd5;
      border-color: #ff6b81;
    }
    .emotion-step.done .emotion-dot {
      background: #69db7c;
      border-color: #2f9e44;
    }
    .emotion-label {
      white-space: nowrap;
    }

    .status-row {
      display: flex;
      justify-content: space-between;
      margin-top: 4px;
      font-size: 0.85rem;
    }
    .hp {
      color: #e85959;
      font-weight: 600;
    }
    .mood-good { color: #2f9e44; }
    .mood-bad  { color: #e85959; }

    /* -------- æˆ°é¬¥ log -------- */
    .log {
      margin-top: 8px;
      padding: 8px;
      border-radius: 12px;
      background: #fff;
      max-height: 200px;
      overflow-y: auto;
      font-size: 0.9rem;
    }
    .log p {
      margin-bottom: 4px;
    }
    .log p.system {
      color: #555;
    }
    .log p.hero {
      color: #1c7ed6;
    }
    .log p.monster {
      color: #e8590c;
    }

    .bear-tip {
      display: flex;
      gap: 8px;
      align-items: flex-start;
      margin-bottom: 6px;
      font-size: 0.9rem;
    }
    .bear-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: #ffe3e3;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }
    .bear-bubble {
      flex: 1;
      border-radius: 12px;
      background: #fff;
      padding: 6px 8px;
      border: 1px dashed #e1b676;
    }

    .inner-voice {
      margin-top: 8px;
      padding: 8px;
      border-radius: 12px;
      background: #fff;
      border: 1px solid #ffb3c1;
      font-size: 0.85rem;
      color: #704040;
    }

    /* -------- é­”ç‹æˆ°çš„èªå¥å€ -------- */
    .phrase-list {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 8px;
    }
    .phrase-btn {
      flex: 1 1 45%;
      padding: 6px 8px;
      border-radius: 12px;
      border: 1px solid #ffc9de;
      background: #fff;
      font-size: 0.8rem;
      cursor: pointer;
      text-align: left;
      transition: background 0.1s, border-color 0.1s, transform 0.1s;
    }
    .phrase-btn:active {
      transform: translateY(1px);
    }
    .phrase-btn.selected {
      background: #ffe0f0;
      border-color: #f06595;
    }

    /* -------- åº•éƒ¨å°èˆªåˆ— -------- */
    .bottom-nav {
      position: fixed;
      left: 50%;
      bottom: 0;
      transform: translateX(-50%);
      max-width: 480px;
      width: 100%;
      background: rgba(255, 247, 230, 0.96);
      border-top: 1px solid rgba(225, 182, 118, 0.6);
      backdrop-filter: blur(8px);
      padding: 4px 4px env(safe-area-inset-bottom, 4px);
      z-index: 30;
    }
    .bottom-nav-inner {
      display: flex;
      justify-content: space-around;
      gap: 4px;
    }
    .nav-item {
      flex: 1;
      text-align: center;
      padding: 6px 4px;
      border-radius: 999px;
      font-size: 0.75rem;
      color: #555;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2px;
    }
    .nav-item span {
      font-size: 1.1rem;
    }
    .nav-item.active {
      background: #ffe08a;
      color: #b35400;
      font-weight: 600;
    }

    @media (min-width: 540px) {
      h1 { font-size: 1.7rem; }
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- Header -->
    <header class="app-header">
      <div class="app-header-logo">â­ï¸</div>
      <div class="app-header-text">
        <div class="app-header-title">æ˜Ÿæ˜Ÿç‹åœ‹ï½œå°å‹‡è€…ä¹‹æ—…</div>
        <div class="app-header-sub">å‰ªåˆ€çŸ³é ­å¸ƒï¼å®‰æ’«å£æƒ…ç·’çš„å°éŠæˆ²</div>
      </div>
    </header>

    <!-- Main -->
    <main class="app-main">
      <!-- é¦–é  -->
      <section class="section" id="home">
        <div class="card">
          <span class="badge">éŠæˆ²ä»‹ç´¹</span>
          <h1>ğŸŒŸ å°å‹‡è€…å¤§å†’éšªï¼Œå‡ºç™¼ï¼</h1>
          <p style="text-align:center;font-size:0.95rem;color:#555;">
            åœ¨æ˜Ÿæ˜Ÿç‹åœ‹è£¡ï¼Œé­”ç‰©å€‘è¢«ã€Œå£æƒ…ç·’ã€å½±éŸ¿ï¼Œè®Šå¾—å¥½æš´èºã€‚<br>
            å°å‹‡è€…å€‘è¦ç”¨ <strong>å‰ªåˆ€âœŒï¸ã€çŸ³é ­âœŠã€å¸ƒğŸ–</strong> èˆ‡æº«æš–çš„èªå¥ï¼Œæ…¢æ…¢å®‰æ’«ç‰ å€‘ã€‚
          </p>
          <ul class="list">
            <li>é¸ä¸€ä½å–œæ­¡çš„å‹‡è€…è·æ¥­ã€‚</li>
            <li>å…ˆæŒ‘æˆ°ä¸€èˆ¬é­”ç‰©ï¼Œç·´ç¿’å®‰æ’« 6 ç¨®å£æƒ…ç·’ã€‚</li>
            <li>æœ€å¾Œå†é€²å…¥ã€Œé­”ç‹æˆ°ã€ï¼Œè½è½é­”ç‹çš„å…§å¿ƒå°åŠ‡å ´ã€‚</li>
          </ul>
          <div class="btn-row">
            <a href="#hero" class="btn">ğŸ§’ é¦¬ä¸Šé¸æ“‡å‹‡è€…</a>
          </div>
        </div>
      </section>

      <!-- å‹‡è€…é¸æ“‡ -->
      <section class="section" id="hero">
        <div class="card" id="hero-card">
          <span class="badge">STEP 1 å‹‡è€…ç™»å ´</span>
          <h2>é¸æ“‡ä½ çš„å‹‡è€…å¤¥ä¼´</h2>
          <p style="text-align:center;font-size:0.9rem;color:#666;">
            ä¸åŒå‹‡è€…æœ‰ä¸åŒå¤©è³¦æ‹³èˆ‡å€‹æ€§ï¼Œé¸ä¸€å€‹æœ€åƒä½ çš„è§’è‰²å§ï¼
          </p>
          <div class="hero-grid">
            <button type="button" class="hero-card" data-hero="æˆ°å£«">
              <div class="hero-card-title">ğŸ›¡ï¸ æˆ°å£«ï¼ˆâœŠï¼‰</div>
              <div class="hero-card-line">å‹‡æ•¢ã€æœ‰è²¬ä»»æ„Ÿ</div>
              <div class="hero-card-line">å£é ­ç¦ªï¼šæˆ‘ä¸€å®šæœƒå®ˆè­·å¤§å®¶ï¼</div>
              <div class="hero-card-tag">å‡º âœŠ ä¸¦å‹åˆ© â†’ å‚³é” 2 å€å¥½å¿ƒæƒ…</div>
            </button>
            <button type="button" class="hero-card" data-hero="æ³•å¸«">
              <div class="hero-card-title">ğŸ”® æ³•å¸«ï¼ˆâœŒï¸ï¼‰</div>
              <div class="hero-card-line">è°æ˜ã€æœ‰å‰µæ„</div>
              <div class="hero-card-line">å£é ­ç¦ªï¼šå˜¿å˜¿ï½æˆ‘æœ‰æ–°é»å­ï¼</div>
              <div class="hero-card-tag">å‡º âœŒï¸ ä¸¦å‹åˆ© â†’ å‚³é” 2 å€å¥½å¿ƒæƒ…</div>
            </button>
            <button type="button" class="hero-card" data-hero="ç‰§å¸«">
              <div class="hero-card-title">ğŸ’– ç‰§å¸«ï¼ˆğŸ–ï¼‰</div>
              <div class="hero-card-line">æº«æŸ”ã€å–„è§£äººæ„</div>
              <div class="hero-card-line">å£é ­ç¦ªï¼šåˆ¥æ“”å¿ƒï¼Œæˆ‘ä¾†å¹«ä½ ï½</div>
              <div class="hero-card-tag">å‡º ğŸ– ä¸¦å‹åˆ© â†’ å‚³é” 2 å€å¥½å¿ƒæƒ…</div>
            </button>
            <button type="button" class="hero-card" data-hero="å‹‡æ•¢çš„æ‘æ°‘">
              <div class="hero-card-title">ğŸŒ¾ å‹‡æ•¢çš„æ‘æ°‘ï¼ˆä»»æ„ï¼‰</div>
              <div class="hero-card-line">æ¨¸å¯¦ã€å …æ¯…</div>
              <div class="hero-card-line">å£é ­ç¦ªï¼šæˆ‘é›–ç„¶å¹³å‡¡ï¼Œä½†ä¸æ”¾æ£„ï¼</div>
              <div class="hero-card-tag">é­”ç‹æˆ°ä½¿ç”¨ä»»æ„æ˜Ÿæ˜Ÿ â†’ è¼¸äº†ä¹Ÿä¸å—å£æƒ…ç·’å½±éŸ¿</div>
            </button>
          </div>
          <div class="hero-summary" id="hero-info">
            ğŸ‘‰ è«‹å…ˆé»é¸ä¸Šé¢çš„å‹‡è€…å¡ç‰‡ã€‚
          </div>
          <div class="btn-row">
            <a href="#battle" class="btn btn-secondary">å‰å¾€ ğŸ‘¾ ä¸€èˆ¬é­”ç‰©æˆ°é¬¥</a>
            <a href="#boss" class="btn btn-ghost">æˆ–ç›´æ¥å» ğŸ‘‘ é­”ç‹æˆ°</a>
          </div>
        </div>
      </section>

      <!-- ä¸€èˆ¬é­”ç‰©æˆ°é¬¥ -->
      <section class="section" id="battle">
        <div class="card" id="battle-card">
          <span class="badge">STEP 2 ä¸€èˆ¬é­”ç‰©</span>
          <h2>å‹‡è€…çŒœæ‹³å°æŠ—å£æƒ…ç·’é­”ç‰©</h2>

          <div class="bear-tip">
            <div class="bear-avatar">ğŸ»</div>
            <div class="bear-bubble" id="bear-tip-text">
              æ‘é•·ç†Šç†Šï¼šå…ˆé¸ä¸€ä½å‹‡è€…ï¼Œå†ç”¨å‰ªåˆ€çŸ³é ­å¸ƒä¾†å®‰æ’«å£æƒ…ç·’é­”ç‰©å§ï¼
            </div>
          </div>

          <p id="monster-name" style="text-align:center;margin-bottom:4px;">
            ğŸ‘¾ ç›®å‰é­”ç‰©ï¼šç”Ÿæ°£å²èŠå§†
          </p>

          <!-- å°æ€ªå£æƒ…ç·’é€²åº¦æ¢ -->
          <div class="emotion-steps" id="emotion-steps"></div>

          <div class="status-row">
            <span>å‹‡è€…å¿ƒæƒ…ï¼š<span id="hero-mood" class="mood-good">ğŸ’– è‰¯å¥½</span></span>
            <span>å·²å®‰æ’«ï¼š<span id="calm-count">0</span> / 6</span>
          </div>

          <div class="btn-row" style="margin-top:10px;">
            <button class="btn" data-hand="âœŠ">âœŠ çŸ³é ­</button>
            <button class="btn" data-hand="âœŒï¸">âœŒï¸ å‰ªåˆ€</button>
            <button class="btn" data-hand="ğŸ–">ğŸ– å¸ƒ</button>
          </div>

          <div class="btn-row">
            <button class="btn btn-secondary" id="btn-cheer">ğŸ’« ä½¿ç”¨å‹‡æ°£æ˜Ÿæ˜Ÿèªå¥</button>
            <button class="btn btn-ghost" id="btn-reset">ğŸ” é‡æ–°é–‹å§‹</button>
          </div>

          <div class="log" id="log-box"></div>
        </div>

        <!-- å®¶é•·å°è®€ -->
        <div class="card">
          <span class="badge">å®¶é•·å°è®€</span>
          <h3>ä¸€èˆ¬é­”ç‰©é—œå¡ï¼šå¯ä»¥ç·´ç¿’ä»€éº¼ï¼Ÿ</h3>
          <ul class="list">
            <li>ç”¨ã€Œèªå¥ã€èªªå‡ºæ„Ÿå—ï¼Œè€Œä¸æ˜¯åªçœ‹è¼¸è´ã€‚</li>
            <li>ç†è§£å£æƒ…ç·’ï¼ˆç”Ÿæ°£ã€å®³æ€•ã€å«‰å¦’ã€å­¤å–®â€¦ï¼‰ä¹Ÿå¯ä»¥è¢«å®‰æ’«ã€‚</li>
            <li>é€éçŒœæ‹³ç·´ç¿’ã€Œè¼ªæµã€ã€ã€Œç­‰å¾…ã€èˆ‡ã€Œæ¥å—è¼¸è´ã€ã€‚</li>
          </ul>
        </div>
      </section>

      <!-- é­”ç‹æˆ°é¬¥ -->
      <section class="section" id="boss">
        <div class="card" id="boss-card">
          <span class="badge">FINAL é­”ç‹å°ˆå±¬é—œå¡</span>
          <h2>ğŸ‘‘ é­”ç‹æˆ°ï¼š6 ç¨®å£æƒ…ç·’çš„å¿ƒè²</h2>

          <div class="bear-tip">
            <div class="bear-avatar">ğŸ»</div>
            <div class="bear-bubble" id="bear-boss-tip">
              æ‘é•·ç†Šç†Šï¼šä¾†åˆ°é­”ç‹åŸäº†ï¼å…ˆé¸ä¸€æ®µæƒ³å°é­”ç‹èªªçš„å®‰æ’«èªå¥ï¼Œå†æ±ºå®šè¦å‡º âœŠâœŒï¸ğŸ– è·Ÿé­”ç‹äº’å‹•ã€‚
            </div>
          </div>

          <p id="boss-name" style="text-align:center;margin-bottom:4px;">
            ğŸ‘‘ é­”ç‹ï¼šæš´é¢¨ä¹‹å¿ƒï¼å¥§ç¾…
          </p>

          <!-- é­”ç‹å£æƒ…ç·’é€²åº¦æ¢ -->
          <div class="emotion-steps" id="boss-emotion-steps"></div>

          <div class="status-row">
            <span>å‹‡è€…å¿ƒæƒ…ï¼š<span id="boss-hero-mood" class="mood-good">ğŸ’– é›†ä¸­</span></span>
            <span>å·²å®‰æ’«ï¼š<span id="boss-calm-count">0</span> / 6</span>
          </div>

          <h3 style="margin-top:10px;font-size:1rem;">é¸æ“‡ä½ æƒ³å°é­”ç‹èªªçš„è©±</h3>
          <div class="phrase-list" id="boss-phrase-list"></div>

          <div class="btn-row" style="margin-top:10px;">
            <button class="btn" data-hand-boss="âœŠ">âœŠ çŸ³é ­</button>
            <button class="btn" data-hand-boss="âœŒï¸">âœŒï¸ å‰ªåˆ€</button>
            <button class="btn" data-hand-boss="ğŸ–">ğŸ– å¸ƒ</button>
          </div>

          <div class="btn-row">
            <button class="btn btn-ghost" id="boss-btn-reset">ğŸ” é‡ä¾†é­”ç‹æˆ°</button>
          </div>

          <div class="inner-voice" id="boss-inner-voice">
            é­”ç‹çš„å¿ƒè²æœƒåœ¨é€™è£¡å‡ºç¾â€¦â€¦
          </div>

          <div class="log" id="boss-log"></div>
        </div>

        <div class="card">
          <span class="badge">å®¶é•·å°è®€</span>
          <h3>é­”ç‹å°ˆå±¬é—œå¡ï¼šæ›´æ·±ä¸€å±¤çš„ç·´ç¿’</h3>
          <ul class="list">
            <li>è®“å­©å­ç·´ç¿’ã€Œä¸»å‹•é¸æ“‡èªå¥ã€ï¼Œè¡¨é”æƒ³æ³•èˆ‡é—œå¿ƒã€‚</li>
            <li>æ¯ä¸€æ®µé­”ç‹å…§å¿ƒå°åŠ‡å ´ï¼Œéƒ½å¯ä»¥ç•¶ä½œæƒ…ç·’æ•…äº‹ä¸€èµ·è¨è«–ã€‚</li>
            <li>é¼“å‹µå­©å­æƒ³ï¼šå¦‚æœæˆ‘æ˜¯é­”ç‹ï¼Œæˆ‘æœƒå¸Œæœ›åˆ¥äººæ€éº¼å°æˆ‘èªªè©±ï¼Ÿ</li>
          </ul>
        </div>
      </section>
    </main>

    <!-- åº•éƒ¨å°èˆª -->
    <nav class="bottom-nav">
      <div class="bottom-nav-inner">
        <a href="#home" class="nav-item active" data-target="home">
          <span>ğŸ </span>é¦–é 
        </a>
        <a href="#hero" class="nav-item" data-target="hero">
          <span>ğŸ§’</span>å‹‡è€…
        </a>
        <a href="#battle" class="nav-item" data-target="battle">
          <span>ğŸ‘¾</span>é­”ç‰©æˆ°
        </a>
        <a href="#boss" class="nav-item" data-target="boss">
          <span>ğŸ‘‘</span>é­”ç‹æˆ°
        </a>
      </div>
    </nav>
  </div>

  <script>
    // --- å‹‡è€…è³‡æ–™ ---
    const heroes = {
      "æˆ°å£«": {
        punch: "âœŠ",
        text: "å‹‡æ•¢ã€æœ‰è²¬ä»»æ„Ÿï¼šã€Œæˆ‘ä¸€å®šæœƒå®ˆè­·å¤§å®¶ï¼ã€",
      },
      "æ³•å¸«": {
        punch: "âœŒï¸",
        text: "è°æ˜ã€æœ‰å‰µæ„ï¼šã€Œå˜¿å˜¿ï½æˆ‘æœ‰æ–°é»å­ï¼ã€",
      },
      "ç‰§å¸«": {
        punch: "ğŸ–",
        text: "æº«æŸ”ã€å–„è§£äººæ„ï¼šã€Œåˆ¥æ“”å¿ƒï¼Œæˆ‘ä¾†å¹«ä½ ï½ã€",
      },
      "å‹‡æ•¢çš„æ‘æ°‘": {
        punch: "ä»»æ„",
        text: "æ¨¸å¯¦ã€å …æ¯…ï¼šã€Œæˆ‘é›–ç„¶å¹³å‡¡ï¼Œä½†ä¸æ”¾æ£„ï¼ã€",
      },
    };

    // ä¸€èˆ¬é­”ç‰©å£æƒ…ç·’
    const badEmotions = ["ç”Ÿæ°£", "å®³æ€•", "å«‰å¦’", "å­¤å–®", "æ²®å–ª", "ç–²ç´¯"];

    // é­”ç‹å°ˆå±¬ 6 ç¨®å£æƒ…ç·’ & å…§å¿ƒå°åŠ‡å ´
    const bossEmotions = ["æ†¤æ€’", "ææ‡¼", "å«‰å¦’", "å­¤å–®", "ç½ªæƒ¡æ„Ÿ", "ç„¡åŠ›æ„Ÿ"];
    const bossInnerVoices = [
      "ã€Œæˆ‘ä¸æ˜¯å–®ç´”åœ¨ç™¼è„¾æ°£ï¼Œæˆ‘åªæ˜¯å¥½æ€•å¤§å®¶éƒ½ä¸è½æˆ‘èªªâ€¦â€¦ã€",
      "ã€Œå…¶å¯¦æˆ‘å¾ˆå®³æ€•å¤±å»ï¼Œåªå¥½è£å¾—å¾ˆå…‡ï¼Œå¥½åƒé€™æ¨£å°±æ¯”è¼ƒä¸æœƒè¢«æ‹‹ä¸‹ã€‚ã€",
      "ã€Œçœ‹åˆ°åˆ¥äººé–‹å¿ƒï¼Œæˆ‘æœƒå·å·é›£éï¼Œè¦ºå¾—è‡ªå·±æ€éº¼éƒ½ä¸å¤ å¥½ã€‚ã€",
      "ã€Œå¤§å®¶éƒ½ä»¥ç‚ºæˆ‘å¾ˆå¼·ï¼Œå¯æ˜¯æœ‰æ™‚å€™æˆ‘åªæ˜¯å¥½å­¤å–®ï¼Œå¥½æƒ³æœ‰äººé™ªæˆ‘ã€‚ã€",
      "ã€Œæˆ‘ä¸€ç›´è²¬æ€ªè‡ªå·±åšå¾—ä¸å¤ å¥½ï¼Œå¥½åƒæ‰€æœ‰éŒ¯éƒ½æ˜¯æˆ‘çš„ã€‚ã€",
      "ã€Œæˆ‘ç´¯åˆ°é€£ç”Ÿæ°£çš„åŠ›æ°£éƒ½æ²’æœ‰ï¼Œåªå‰©ä¸‹ã€ç®—äº†ã€å…©å€‹å­—ã€‚ã€"
    ];

    // ä¸€èˆ¬é—œå¡ä½¿ç”¨çš„å‹‡æ°£æ˜Ÿæ˜Ÿèªå¥ï¼ˆéš¨æ©Ÿï¼‰
    const cheerSentences = [
      "ã€Œæˆ‘åœ¨é€™è£¡è½ä½ èªªï¼Œä¸ç”¨ä¸€å€‹äººæ‰›ã€‚ã€",
      "ã€Œç”Ÿæ°£æ²’é—œä¿‚ï¼Œæˆ‘å€‘ä¸€èµ·æ‰¾æ–¹æ³•ã€‚ã€",
      "ã€Œä½ å¾ˆé‡è¦ï¼Œä¹Ÿå€¼å¾—è¢«å¥½å¥½å°å¾…ã€‚ã€",
      "ã€Œå®³æ€•çš„æ™‚å€™ï¼Œå¯ä»¥å…ˆæ·±å‘¼å¸ä¸‰æ¬¡ã€‚ã€",
      "ã€Œå¤±æ•—åªæ˜¯æš«åœï¼Œä¸æ˜¯çµæŸã€‚ã€",
      "ã€Œè¬è¬ä½ é¡˜æ„æŠŠå¿ƒæƒ…èªªå‡ºä¾†ã€‚ã€"
    ];

    // é­”ç‹æˆ°å°ˆç”¨èªå¥ï¼ˆè®“ç©å®¶è‡ªå·±é¸ï¼‰
    const bossPhrases = [
      "ã€Œä¸ç®¡ä½ ç¾åœ¨æ˜¯ä¸æ˜¯åœ¨ç”Ÿæ°£ï¼Œæˆ‘éƒ½é¡˜æ„æ…¢æ…¢è½ä½ èªªã€‚ã€",
      "ã€Œä½ çœ‹èµ·ä¾†å¾ˆç”¨åŠ›æ’è‘—ï¼Œä¸€å®šä¹Ÿå¾ˆç´¯äº†å§ï¼Ÿã€",
      "ã€Œå°±ç®—ä½ è¡¨ç¾å¾—å¾ˆå¯æ€•ï¼Œæˆ‘é‚„æ˜¯ç›¸ä¿¡ä½ å¿ƒè£¡æœ‰æº«æŸ”çš„ä¸€è§’ã€‚ã€",
      "ã€Œå¦‚æœä½ é¡˜æ„ï¼Œæˆ‘å¯ä»¥é™ªä½ ä¸€èµ·é¢å°å®³æ€•çš„äº‹æƒ…ã€‚ã€",
      "ã€ŒçŠ¯éŒ¯ä¸¦ä¸ä»£è¡¨ä½ æ˜¯å£äººï¼Œåªä»£è¡¨ä½ ä¹Ÿæ˜¯æœƒå—å‚·çš„æ™®é€šäººã€‚ã€",
      "ã€Œä½ ä¸ç”¨ä¸€ç›´è£å¾—å¾ˆå¼·ï¼Œä¼‘æ¯ä¸€ä¸‹ä¹Ÿæ²’æœ‰é—œä¿‚ã€‚ã€"
    ];

    let currentHero = null;
    let calmCount = 0;
    let currentEmotionIndex = 0;

    let bossCalmCount = 0;
    let bossCurrentEmotionIndex = 0;
    let currentBossPhraseIndex = null;

    const heroInfoEl = document.getElementById("hero-info");
    const heroMoodEl = document.getElementById("hero-mood");
    const calmCountEl = document.getElementById("calm-count");
    const monsterNameEl = document.getElementById("monster-name");
    const logBox = document.getElementById("log-box");
    const bearTipEl = document.getElementById("bear-tip-text");
    const emotionStepsEl = document.getElementById("emotion-steps");

    // é­”ç‹æˆ°å…ƒç´ 
    const bossHeroMoodEl = document.getElementById("boss-hero-mood");
    const bossCalmCountEl = document.getElementById("boss-calm-count");
    const bossNameEl = document.getElementById("boss-name");
    const bossLogBox = document.getElementById("boss-log");
    const bossEmotionStepsEl = document.getElementById("boss-emotion-steps");
    const bossInnerVoiceEl = document.getElementById("boss-inner-voice");
    const bossTipEl = document.getElementById("bear-boss-tip");
    const bossPhraseListEl = document.getElementById("boss-phrase-list");

    function log(targetEl, text, type = "system") {
      const p = document.createElement("p");
      p.textContent = text;
      p.classList.add(type);
      targetEl.appendChild(p);
      targetEl.scrollTop = targetEl.scrollHeight;
    }

    // --- ä¸€èˆ¬é—œå¡ï¼šå£æƒ…ç·’åœ“é» ---
    function renderEmotionSteps() {
      emotionStepsEl.innerHTML = "";
      badEmotions.forEach((emo) => {
        const step = document.createElement("div");
        step.className = "emotion-step";
        const dot = document.createElement("div");
        dot.className = "emotion-dot";
        const label = document.createElement("div");
        label.className = "emotion-label";
        label.textContent = emo;
        step.appendChild(dot);
        step.appendChild(label);
        emotionStepsEl.appendChild(step);
      });
      updateEmotionSteps();
    }

    function updateEmotionSteps() {
      const steps = emotionStepsEl.querySelectorAll(".emotion-step");
      steps.forEach((step, idx) => {
        step.classList.remove("current", "done");
        if (idx < calmCount) {
          step.classList.add("done");
        } else if (idx === currentEmotionIndex) {
          step.classList.add("current");
        }
      });
    }

    // --- é­”ç‹æˆ°ï¼šå£æƒ…ç·’åœ“é» ---
    function renderBossEmotionSteps() {
      bossEmotionStepsEl.innerHTML = "";
      bossEmotions.forEach((emo) => {
        const step = document.createElement("div");
        step.className = "emotion-step";
        const dot = document.createElement("div");
        dot.className = "emotion-dot";
        const label = document.createElement("div");
        label.className = "emotion-label";
        label.textContent = emo;
        step.appendChild(dot);
        step.appendChild(label);
        bossEmotionStepsEl.appendChild(step);
      });
      updateBossEmotionSteps();
    }

    function updateBossEmotionSteps() {
      const steps = bossEmotionStepsEl.querySelectorAll(".emotion-step");
      steps.forEach((step, idx) => {
        step.classList.remove("current", "done");
        if (idx < bossCalmCount) {
          step.classList.add("done");
        } else if (idx === bossCurrentEmotionIndex) {
          step.classList.add("current");
        }
      });
    }

    // å‹‡è€…é¸æ“‡
    const heroCards = document.querySelectorAll(".hero-card");
    heroCards.forEach(card => {
      card.addEventListener("click", () => {
        const heroName = card.dataset.hero;
        currentHero = heroName;
        heroCards.forEach(c => c.classList.remove("selected"));
        card.classList.add("selected");

        const info = heroes[heroName];
        heroInfoEl.textContent = `ä½ é¸æ“‡äº†ã€${heroName}ã€‘ã€‚å¤©è³¦æ‹³ï¼š${info.punch}ï¼›å€‹æ€§ï¼š${info.text}`;
        bearTipEl.textContent = `æ‘é•·ç†Šç†Šï¼šå¤ªå¥½äº†ï¼Œå°å‹‡è€…ã€Œ${heroName}ã€æº–å‚™å‡ºç™¼ï¼å¯ä»¥å…ˆåˆ°ä¸€èˆ¬é­”ç‰©å€ç·´ç¿’ï¼Œå†æŒ‘æˆ°é­”ç‹æˆ°ã€‚`;
        bossTipEl.textContent = `æ‘é•·ç†Šç†Šï¼šé­”ç‹ä¹Ÿåœ¨ç­‰ä½ å–”ï¼Œå°å‹‡è€…ã€Œ${heroName}ã€ã€‚è¨˜å¾—å…ˆé¸ä¸€æ®µæƒ³èªªçš„è©±ï¼Œå†å‡ºæ‹³ï½`;

        // ä¸€èˆ¬é—œå¡é‡ç½®
        logBox.innerHTML = "";
        heroMoodEl.textContent = "ğŸ’– è‰¯å¥½";
        heroMoodEl.classList.remove("mood-bad");
        heroMoodEl.classList.add("mood-good");
        calmCount = 0;
        currentEmotionIndex = 0;
        calmCountEl.textContent = calmCount.toString();
        monsterNameEl.textContent = `ğŸ‘¾ ç›®å‰é­”ç‰©ï¼š${badEmotions[currentEmotionIndex]}å²èŠå§†`;
        updateEmotionSteps();
        log(logBox, `æ‘é•·ç†Šç†Šï¼šå°å‹‡è€…ã€${heroName}ã€‘åŠ å…¥éšŠä¼ï¼`, "system");

        // é­”ç‹æˆ°ä¹Ÿä¸€ä½µç¨å¾®åˆå§‹åŒ–ï¼ˆä½†ä¸æ¸…ç©ºå…§å¿ƒå°åŠ‡å ´ï¼‰
        bossHeroMoodEl.textContent = "ğŸ’– é›†ä¸­";
        bossHeroMoodEl.classList.add("mood-good");
        bossHeroMoodEl.classList.remove("mood-bad");
      });
    });

    // çŒœæ‹³è¦å‰‡
    function judge(player, enemy) {
      if (player === enemy) return "draw";
      if (
        (player === "âœŠ" && enemy === "âœŒï¸") ||
        (player === "âœŒï¸" && enemy === "ğŸ–") ||
        (player === "ğŸ–" && enemy === "âœŠ")
      ) {
        return "win";
      }
      return "lose";
    }

    function randomHand() {
      const hands = ["âœŠ", "âœŒï¸", "ğŸ–"];
      return hands[Math.floor(Math.random() * hands.length)];
    }

    // --- ä¸€èˆ¬é­”ç‰©æˆ°ï¼šçŒœæ‹³æŒ‰éˆ• ---
    document.querySelectorAll("#battle-card .btn").forEach(btn => {
      const hand = btn.dataset.hand;
      if (!hand) return;
      btn.addEventListener("click", () => {
        if (!currentHero) {
          alert("è«‹å…ˆåˆ°ã€å‹‡è€…ã€‘åˆ†é é¸æ“‡ä¸€ä½å°å‹‡è€…ã€‚");
          return;
        }
        const playerHand = hand;
        const enemyHand = randomHand();
        const result = judge(playerHand, enemyHand);
        const emotion = badEmotions[currentEmotionIndex];

        if (result === "win") {
          log(logBox, `ä½ å‡ºäº† ${playerHand}ï¼Œé­”ç‰©å‡ºäº† ${enemyHand}ã€‚ä½ è´äº†ï¼å®‰æ’«äº†ã€Œ${emotion}ã€çš„æƒ…ç·’ã€‚`, "hero");
          calmCount++;
          calmCountEl.textContent = calmCount.toString();
          heroMoodEl.textContent = "ğŸ’– è‰¯å¥½";
          heroMoodEl.classList.add("mood-good");
          heroMoodEl.classList.remove("mood-bad");

          if (calmCount >= badEmotions.length) {
            log(logBox, `âœ¨ ${emotion}å²èŠå§†æ„Ÿå—åˆ°æ»¿æ»¿çš„é—œå¿ƒï¼Œæ‰€æœ‰å£æƒ…ç·’éƒ½è¢«å¥½å¥½çœ‹è¦‹ä¸¦å®‰æ’«äº†ï¼`, "system");
            monsterNameEl.textContent = "ğŸ‰ é­”ç‰©å·²å…¨éƒ¨è¢«å®‰æ’«ï¼Œæ­å–œå°å‹‡è€…é€šé—œï¼";
            bearTipEl.textContent = "æ‘é•·ç†Šç†Šï¼šå¤ªæ£’äº†ï¼ä¸€èˆ¬é­”ç‰©éƒ½æˆåŠŸå®‰æ’«äº†ï¼Œå¯ä»¥è€ƒæ…®å‰å¾€é­”ç‹åŸæŒ‘æˆ°æœ€çµ‚è©¦ç…‰ã€‚";
            currentEmotionIndex = badEmotions.length - 1;
          } else {
            currentEmotionIndex = calmCount;
            monsterNameEl.textContent = `ğŸ‘¾ ä¸‹ä¸€å€‹å£æƒ…ç·’ï¼š${badEmotions[currentEmotionIndex]}å²èŠå§†`;
            bearTipEl.textContent = `æ‘é•·ç†Šç†Šï¼šæ¥ä¸‹ä¾†è¼ªåˆ°ã€Œ${badEmotions[currentEmotionIndex]}ã€çš„æƒ…ç·’äº†ï¼Œæˆ‘å€‘æ…¢æ…¢é™ªå®ƒå°±å¥½ï½`;
          }
          updateEmotionSteps();
        } else if (result === "draw") {
          log(logBox, `ä½ å‡ºäº† ${playerHand}ï¼Œé­”ç‰©å‡ºäº† ${enemyHand}ã€‚å¹³æ‰‹ï½å¯ä»¥å†è©¦ä¸€æ¬¡ã€‚`, "system");
        } else {
          log(logBox, `ä½ å‡ºäº† ${playerHand}ï¼Œé­”ç‰©å‡ºäº† ${enemyHand}ã€‚é€™å›åˆé­”ç‰©æ¯”è¼ƒæ¿€å‹•ã€‚`, "monster");
          heroMoodEl.textContent = "ğŸ’” éœ€è¦èª¿æ•´å¿ƒæƒ…";
          heroMoodEl.classList.remove("mood-good");
          heroMoodEl.classList.add("mood-bad");
          bearTipEl.textContent = "æ‘é•·ç†Šç†Šï¼šè¼¸äº†ä¹Ÿæ²’é—œä¿‚ï¼Œå…ˆæ·±å‘¼å¸ä¸€ä¸‹ï¼Œå†ç”¨å‹‡æ°£æ˜Ÿæ˜Ÿèªå¥å¹«åŠ©è‡ªå·±å’Œé­”ç‰©ã€‚";
        }
      });
    });

    // ä¸€èˆ¬é—œå¡ï¼šå‹‡æ°£æ˜Ÿæ˜Ÿèªå¥
    document.getElementById("btn-cheer").addEventListener("click", () => {
      const sentence = cheerSentences[Math.floor(Math.random() * cheerSentences.length)];
      log(logBox, `â­ å°å‹‡è€…èªªï¼š${sentence}`, "hero");
      heroMoodEl.textContent = "ğŸ’– èª¿æ•´å®Œç•¢";
      heroMoodEl.classList.add("mood-good");
      heroMoodEl.classList.remove("mood-bad");
      bearTipEl.textContent = "æ‘é•·ç†Šç†Šï¼šå¥½æ£’çš„èªå¥ï¼ç•¶æˆ‘å€‘é¡˜æ„èªªå‡ºé—œå¿ƒï¼Œé­”ç‰©å’Œè‡ªå·±éƒ½æœƒæ¯”è¼ƒè¼•é¬†ã€‚";
    });

    // ä¸€èˆ¬é—œå¡ï¼šé‡æ–°é–‹å§‹
    document.getElementById("btn-reset").addEventListener("click", () => {
      currentHero = null;
      heroCards.forEach(c => c.classList.remove("selected"));
      heroInfoEl.textContent = "ğŸ‘‰ è«‹å…ˆé»é¸ä¸Šé¢çš„å‹‡è€…å¡ç‰‡ã€‚";
      logBox.innerHTML = "";
      heroMoodEl.textContent = "ğŸ’– è‰¯å¥½";
      heroMoodEl.classList.add("mood-good");
      heroMoodEl.classList.remove("mood-bad");
      calmCount = 0;
      currentEmotionIndex = 0;
      calmCountEl.textContent = calmCount.toString();
      monsterNameEl.textContent = "ğŸ‘¾ ç›®å‰é­”ç‰©ï¼šç”Ÿæ°£å²èŠå§†";
      bearTipEl.textContent = "æ‘é•·ç†Šç†Šï¼šå…ˆé¸ä¸€ä½å‹‡è€…ï¼Œå†ç”¨å‰ªåˆ€çŸ³é ­å¸ƒä¾†è·Ÿé­”ç‰©äº’å‹•å§ï¼";
      updateEmotionSteps();
      log(logBox, "æ‘é•·ç†Šç†Šï¼šé‡æ–°å‡ºç™¼ï¼é€™æ¬¡æœƒé‡åˆ°ä¸ä¸€æ¨£çš„å¿ƒæƒ…å–”ï½", "system");

      // é­”ç‹æˆ°ä¹Ÿæ¸…ç©ºéƒ¨åˆ†ç‹€æ…‹
      bossCalmCount = 0;
      bossCurrentEmotionIndex = 0;
      bossCalmCountEl.textContent = "0";
      bossHeroMoodEl.textContent = "ğŸ’– é›†ä¸­";
      bossHeroMoodEl.classList.add("mood-good");
      bossHeroMoodEl.classList.remove("mood-bad");
      bossNameEl.textContent = "ğŸ‘‘ é­”ç‹ï¼šæš´é¢¨ä¹‹å¿ƒï¼å¥§ç¾…";
      bossInnerVoiceEl.textContent = "é­”ç‹çš„å¿ƒè²æœƒåœ¨é€™è£¡å‡ºç¾â€¦â€¦";
      bossTipEl.textContent = "æ‘é•·ç†Šç†Šï¼šä¾†åˆ°é­”ç‹åŸäº†ï¼å…ˆé¸ä¸€æ®µæƒ³å°é­”ç‹èªªçš„å®‰æ’«èªå¥ï¼Œå†æ±ºå®šè¦å‡º âœŠâœŒï¸ğŸ– è·Ÿé­”ç‹äº’å‹•ã€‚";
      currentBossPhraseIndex = null;
      renderBossEmotionSteps();
      bossLogBox.innerHTML = "";
    });

    // --- é­”ç‹æˆ°ï¼šèªå¥æŒ‰éˆ• ---
    function renderBossPhrases() {
      bossPhraseListEl.innerHTML = "";
      bossPhrases.forEach((text, idx) => {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "phrase-btn";
        btn.textContent = text;
        btn.addEventListener("click", () => {
          currentBossPhraseIndex = idx;
          // æ¨™è¨˜é¸ä¸­
          bossPhraseListEl.querySelectorAll(".phrase-btn").forEach(b => b.classList.remove("selected"));
          btn.classList.add("selected");
          log(bossLogBox, `ä½ æƒ³å°é­”ç‹èªªï¼š${text}`, "hero");
          bossTipEl.textContent = "æ‘é•·ç†Šç†Šï¼šå¥½æº«æš–çš„ä¸€å¥è©±ï½ç¾åœ¨å¯ä»¥å‡ºä¸€å€‹æ‹³ï¼Œè©¦è‘—å’Œé­”ç‹äº’å‹•çœ‹çœ‹ã€‚";
        });
        bossPhraseListEl.appendChild(btn);
      });
    }

    // --- é­”ç‹æˆ°ï¼šçŒœæ‹³æŒ‰éˆ• ---
    document.querySelectorAll("#boss-card [data-hand-boss]").forEach(btn => {
      const hand = btn.dataset.handBoss;
      btn.addEventListener("click", () => {
        if (!currentHero) {
          alert("è«‹å…ˆåˆ°ã€å‹‡è€…ã€‘åˆ†é é¸æ“‡ä¸€ä½å°å‹‡è€…ã€‚");
          return;
        }
        if (currentBossPhraseIndex === null) {
          alert("è«‹å…ˆé¸æ“‡ä¸€æ®µæƒ³å°é­”ç‹èªªçš„å®‰æ’«èªå¥ã€‚");
          return;
        }
        const playerHand = hand;
        const enemyHand = randomHand(); // é­”ç‹ä¹Ÿå‡ºæ‹³ï¼Œä½†æˆ‘å€‘èªªã€Œä»€éº¼æ‹³éƒ½å¯èƒ½å‡ºã€
        const result = judge(playerHand, enemyHand);
        const emotion = bossEmotions[bossCurrentEmotionIndex];
        const phrase = bossPhrases[currentBossPhraseIndex];

        log(bossLogBox, `ä½ å‡ºäº† ${playerHand}ï¼Œé­”ç‹å‡ºäº† ${enemyHand}ã€‚`, "system");

        if (result === "win") {
          bossCalmCount++;
          bossCalmCountEl.textContent = bossCalmCount.toString();
          bossHeroMoodEl.textContent = "ğŸ’– ç©©å®š";
          bossHeroMoodEl.classList.add("mood-good");
          bossHeroMoodEl.classList.remove("mood-bad");

          // é¡¯ç¤ºé­”ç‹å…§å¿ƒå°åŠ‡å ´
          const voice = bossInnerVoices[bossCurrentEmotionIndex];
          bossInnerVoiceEl.textContent = `é­”ç‹çš„å¿ƒè²ï¼ˆ${emotion}ï¼‰ï¼š${voice}`;
          log(
            bossLogBox,
            `ä½ ç”¨ã€Œ${phrase}ã€å®‰æ’«äº†é­”ç‹å¿ƒä¸­çš„ã€Œ${emotion}ã€æƒ…ç·’ã€‚`,
            "hero"
          );

          if (bossCalmCount >= bossEmotions.length) {
            log(
              bossLogBox,
              "âœ¨ é­”ç‹æ‰€æœ‰çš„å£æƒ…ç·’éƒ½è¢«å¥½å¥½çœ‹è¦‹ä¸¦å®‰æ’«äº†ï¼Œä»–æ…¢æ…¢å¸ä¸‹ç›”ç”²ï¼Œéœ²å‡ºçœŸæ­£çš„è¡¨æƒ…â€¦â€¦",
              "system"
            );
            bossNameEl.textContent = "ğŸŒˆ é­”ç‹ï¼šæ¢å¾©æœ¬ä¾†çš„æ¨£å­ï¼å¥§ç¾…";
            bossTipEl.textContent = "æ‘é•·ç†Šç†Šï¼šæ­å–œä½ ï¼Œå°å‹‡è€…ï¼ä½ ä¸æ˜¯æŠŠé­”ç‹æ‰“å€’ï¼Œè€Œæ˜¯é™ªä»–èµ°éäº†é‚£äº›é›£å—çš„å¿ƒæƒ…ã€‚é€™å°±æ˜¯æœ€å²å®³çš„å‹‡æ°£ã€‚";
          } else {
            bossCurrentEmotionIndex = bossCalmCount;
            bossTipEl.textContent = `æ‘é•·ç†Šç†Šï¼šæ¥ä¸‹ä¾†è¦é¢å°çš„æ˜¯é­”ç‹å¿ƒä¸­çš„ã€Œ${bossEmotions[bossCurrentEmotionIndex]}ã€ã€‚æˆ‘å€‘ä¸€æ¨£å¯ä»¥æ…¢æ…¢é™ªä»–ã€‚`;
          }
          updateBossEmotionSteps();
        } else if (result === "draw") {
          log(bossLogBox, "é€™å›åˆå‹¢å‡åŠ›æ•µï¼Œèª°ä¹Ÿèªªæœä¸äº†èª°ã€‚å¯ä»¥å†è©¦ä¸€æ¬¡ã€‚", "system");
        } else {
          log(bossLogBox, "é­”ç‹çš„æƒ…ç·’ä¸€æ™‚åˆå¼·çƒˆäº†èµ·ä¾†â€¦â€¦ä¹Ÿè¨±ä»–é‚„æ²’æº–å‚™å¥½è½é€²å»ã€‚", "monster");
          bossHeroMoodEl.textContent = "ğŸ’” æœ‰é»ç–²æ†Š";
          bossHeroMoodEl.classList.remove("mood-good");
          bossHeroMoodEl.classList.add("mood-bad");
          bossTipEl.textContent = "æ‘é•·ç†Šç†Šï¼šç•¶å°æ–¹é‚„æ²’æº–å‚™å¥½ï¼Œæˆ‘å€‘ä¹Ÿå¯ä»¥å…ˆç…§é¡§è‡ªå·±çš„å¿ƒæƒ…ï¼Œå†æ…¢æ…¢ä¾†ã€‚";
        }
      });
    });

    // é­”ç‹æˆ°ï¼šé‡ç½®
    document.getElementById("boss-btn-reset").addEventListener("click", () => {
      bossCalmCount = 0;
      bossCurrentEmotionIndex = 0;
      bossCalmCountEl.textContent = "0";
      bossHeroMoodEl.textContent = "ğŸ’– é›†ä¸­";
      bossHeroMoodEl.classList.add("mood-good");
      bossHeroMoodEl.classList.remove("mood-bad");
      bossNameEl.textContent = "ğŸ‘‘ é­”ç‹ï¼šæš´é¢¨ä¹‹å¿ƒï¼å¥§ç¾…";
      bossInnerVoiceEl.textContent = "é­”ç‹çš„å¿ƒè²æœƒåœ¨é€™è£¡å‡ºç¾â€¦â€¦";
      bossTipEl.textContent = "æ‘é•·ç†Šç†Šï¼šé€™æ¬¡æˆ‘å€‘é‡æ–°ä¾†éï¼Œè¨˜å¾—å…ˆé¸ä¸€æ®µæƒ³å°é­”ç‹èªªçš„è©±ï¼Œå†å‡ºæ‹³ã€‚";
      currentBossPhraseIndex = null;
      bossPhraseListEl.querySelectorAll(".phrase-btn").forEach(b => b.classList.remove("selected"));
      bossLogBox.innerHTML = "";
      renderBossEmotionSteps();
      log(bossLogBox, "æ‘é•·ç†Šç†Šï¼šæ–°çš„é­”ç‹æˆ°é–‹å§‹äº†ï¼Œæˆ‘å€‘ä¸€æ¨£æ˜¯ä¾†ã€Œç†è§£ã€ä»–ï¼Œä¸æ˜¯ä¾†æŠŠä»–æ‰“å€’ã€‚", "system");
    });

    // åº•éƒ¨å°èˆª active ç‹€æ…‹
    const navItems = document.querySelectorAll(".nav-item");
    navItems.forEach(item => {
      item.addEventListener("click", () => {
        navItems.forEach(i => i.classList.remove("active"));
        item.classList.add("active");
      });
    });

    // åˆå§‹åŒ–
    renderEmotionSteps();
    renderBossEmotionSteps();
    renderBossPhrases();
    log(logBox, "æ‘é•·ç†Šç†Šï¼šæ­¡è¿ä¾†åˆ°æ˜Ÿæ˜Ÿç‹åœ‹ï½é»é¸ä¸Šæ–¹ã€Œå‹‡è€…ã€å…ˆé¸è§’è‰²ï¼Œæˆ–ç›´æ¥æ»‘åˆ°é­”ç‰©æˆ°å€é–‹å§‹ç·´ç¿’ï¼", "system");
    log(bossLogBox, "æ‘é•·ç†Šç†Šï¼šé­”ç‹æˆ°æ¯”è¼ƒä¸å®¹æ˜“ï¼Œä½†æˆ‘å€‘çš„ç›®æ¨™ä¸æ˜¯æ‰“æ•—ä»–ï¼Œè€Œæ˜¯ç†è§£ä»–å¿ƒè£¡çš„é‚£äº›è¤‡é›œæ„Ÿå—ã€‚", "system");
  </script>
</body>
</html>