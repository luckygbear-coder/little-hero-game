<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>å°å‹‡è€…ä¹‹æ—…å¤§å†’éšª - Little Hero Game</title>
  <style>
    /* -------- åŸºç¤è¨­å®š -------- */
    * {
      box-sizing: border-box;
    }
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
    }
    body {
      font-family: "Noto Sans TC", -apple-system, BlinkMacSystemFont, sans-serif;
      background: linear-gradient(180deg, #ffeec9 0%, #ffe9f2 40%, #e4f2ff 100%);
      color: #333;
    }
    a {
      color: inherit;
      text-decoration: none;
    }

    /* -------- App å¤–æ¡† -------- */
    .app {
      max-width: 480px;
      margin: 0 auto;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* -------- ä¸Šæ–¹æ¨™é¡Œåˆ— -------- */
    .app-header {
      position: sticky;
      top: 0;
      z-index: 20;
      background: rgba(255, 248, 224, 0.95);
      backdrop-filter: blur(8px);
      border-bottom: 1px solid rgba(225, 182, 118, 0.5);
      padding: 8px 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .app-header-logo {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #fff8c7 0, #ffd46a 40%, #ffb347 75%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }
    .app-header-text {
      display: flex;
      flex-direction: column;
    }
    .app-header-title {
      font-size: 1rem;
      font-weight: 700;
    }
    .app-header-sub {
      font-size: 0.8rem;
      color: #666;
    }

    /* -------- å…§å®¹å€ -------- */
    .app-main {
      flex: 1;
      padding: 12px 12px 72px;
    }

    .section {
      margin-bottom: 16px;
    }
    .card {
      background: #fff7e6;
      border-radius: 16px;
      border: 2px solid #e1b676;
      box-shadow: 0 3px 8px rgba(0,0,0,0.12);
      padding: 16px;
    }
    .card + .card {
      margin-top: 12px;
    }
    h1, h2, h3 {
      margin: 0 0 8px;
      text-align: center;
    }
    h1 {
      font-size: 1.5rem;
    }
    h2 {
      font-size: 1.25rem;
    }
    p {
      margin: 4px 0;
      line-height: 1.6;
    }

    .badge {
      display: inline-block;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 0.75rem;
      background: #ffe08a;
      margin-bottom: 6px;
    }

    /* -------- æŒ‰éˆ• -------- */
    .btn-row {
      display: flex;
      gap: 8px;
      margin-top: 8px;
      flex-wrap: wrap;
    }
    .btn {
      flex: 1;
      padding: 10px 6px;
      border-radius: 999px;
      border: none;
      font-size: 1.05rem;
      cursor: pointer;
      background: #ffcc66;
      transition: transform 0.1s, box-shadow 0.1s, background 0.1s;
      text-align: center;
      white-space: nowrap;
    }
    .btn:active {
      transform: translateY(1px);
      box-shadow: 0 1px 3px rgba(0,0,0,0.15) inset;
    }
    .btn-secondary {
      background: #ffd8e2;
      font-size: 0.95rem;
    }
    .btn-ghost {
      background: #fff;
      border: 1px dashed #e1b676;
      font-size: 0.85rem;
    }

    /* -------- é¦–é åˆ—è¡¨ -------- */
    .list {
      padding-left: 20px;
      margin: 4px 0;
      font-size: 0.95rem;
    }

    /* -------- å‹‡è€…å¡ç‰‡ -------- */
    .hero-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 8px;
      margin-top: 8px;
    }
    .hero-card {
      background: #fff;
      border-radius: 14px;
      border: 1px solid #ffd38a;
      padding: 8px;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      gap: 2px;
      cursor: pointer;
      transition: transform 0.1s, box-shadow 0.1s, border-color 0.1s;
      font-size: 0.9rem;
    }
    .hero-card-title {
      font-weight: 700;
      font-size: 0.95rem;
    }
    .hero-card-line {
      font-size: 0.8rem;
      color: #555;
    }
    .hero-card-tag {
      font-size: 0.75rem;
      padding: 2px 6px;
      border-radius: 999px;
      background: #ffe9b5;
      margin-top: 4px;
    }
    .hero-card.selected {
      border-color: #ff922b;
      box-shadow: 0 0 0 2px rgba(255, 146, 43, 0.35);
      transform: translateY(-1px);
    }

    .hero-summary {
      margin-top: 8px;
      padding: 8px;
      border-radius: 12px;
      background: #fff;
      font-size: 0.9rem;
      color: #555;
    }

    /* -------- å£æƒ…ç·’é€²åº¦æ¢ -------- */
    .emotion-steps {
      display: flex;
      justify-content: space-between;
      gap: 4px;
      margin: 10px 0 4px;
      font-size: 0.7rem;
    }
    .emotion-step {
      flex: 1;
      text-align: center;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2px;
    }
    .emotion-dot {
      width: 16px;
      height: 16px;
      border-radius: 999px;
      border: 2px solid #ffb3c1;
      background: #fff;
    }
    .emotion-step.current .emotion-dot {
      background: #ffccd5;
      border-color: #ff6b81;
    }
    .emotion-step.done .emotion-dot {
      background: #69db7c;
      border-color: #2f9e44;
    }
    .emotion-label {
      white-space: nowrap;
    }

    .status-row {
      display: flex;
      justify-content: space-between;
      margin-top: 4px;
      font-size: 0.85rem;
    }
    .hp {
      color: #e85959;
      font-weight: 600;
    }
    .mood-good { color: #2f9e44; }
    .mood-bad  { color: #e85959; }

    /* -------- æˆ°é¬¥ log -------- */
    .log {
      margin-top: 8px;
      padding: 8px;
      border-radius: 12px;
      background: #fff;
      max-height: 200px;
      overflow-y: auto;
      font-size: 0.9rem;
    }
    .log p {
      margin-bottom: 4px;
    }
    .log p.system {
      color: #555;
    }
    .log p.hero {
      color: #1c7ed6;
    }
    .log p.monster {
      color: #e8590c;
    }

    .bear-tip {
      display: flex;
      gap: 8px;
      align-items: flex-start;
      margin-bottom: 6px;
      font-size: 0.9rem;
    }
    .bear-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: #ffe3e3;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }
    .bear-bubble {
      flex: 1;
      border-radius: 12px;
      background: #fff;
      padding: 6px 8px;
      border: 1px dashed #e1b676;
    }

    /* -------- åº•éƒ¨å°èˆªåˆ— -------- */
    .bottom-nav {
      position: fixed;
      left: 50%;
      bottom: 0;
      transform: translateX(-50%);
      max-width: 480px;
      width: 100%;
      background: rgba(255, 247, 230, 0.96);
      border-top: 1px solid rgba(225, 182, 118, 0.6);
      backdrop-filter: blur(8px);
      padding: 4px 4px env(safe-area-inset-bottom, 4px);
      z-index: 30;
    }
    .bottom-nav-inner {
      display: flex;
      justify-content: space-around;
      gap: 4px;
    }
    .nav-item {
      flex: 1;
      text-align: center;
      padding: 6px 4px;
      border-radius: 999px;
      font-size: 0.75rem;
      color: #555;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 2px;
    }
    .nav-item span {
      font-size: 1.1rem;
    }
    .nav-item.active {
      background: #ffe08a;
      color: #b35400;
      font-weight: 600;
    }

    @media (min-width: 540px) {
      h1 { font-size: 1.7rem; }
    }
  </style>
</head>
<body>
  <div class="app">
    <!-- Header -->
    <header class="app-header">
      <div class="app-header-logo">â­ï¸</div>
      <div class="app-header-text">
        <div class="app-header-title">æ˜Ÿæ˜Ÿç‹åœ‹ï½œå°å‹‡è€…ä¹‹æ—…</div>
        <div class="app-header-sub">å‰ªåˆ€çŸ³é ­å¸ƒï¼å®‰æ’«å£æƒ…ç·’çš„å°éŠæˆ²</div>
      </div>
    </header>

    <!-- Main -->
    <main class="app-main">
      <!-- é¦–é  -->
      <section class="section" id="home">
        <div class="card">
          <span class="badge">éŠæˆ²ä»‹ç´¹</span>
          <h1>ğŸŒŸ å°å‹‡è€…å¤§å†’éšªï¼Œå‡ºç™¼ï¼</h1>
          <p style="text-align:center;font-size:0.95rem;color:#555;">
            åœ¨æ˜Ÿæ˜Ÿç‹åœ‹è£¡ï¼Œé­”ç‰©å€‘è¢«ã€Œå£æƒ…ç·’ã€å½±éŸ¿ï¼Œè®Šå¾—å¥½æš´èºã€‚<br>
            å°å‹‡è€…å€‘è¦ç”¨ <strong>å‰ªåˆ€âœŒï¸ã€çŸ³é ­âœŠã€å¸ƒğŸ–</strong> èˆ‡æº«æš–çš„èªå¥ï¼Œæ…¢æ…¢å®‰æ’«ç‰ å€‘ã€‚
          </p>
          <ul class="list">
            <li>é¸ä¸€ä½å–œæ­¡çš„å‹‡è€…è·æ¥­ã€‚</li>
            <li>å’Œé­”ç‰©ç©å‰ªåˆ€çŸ³é ­å¸ƒï¼Œæ¯è´ä¸€æ¬¡å°±å®‰æ’«ä¸€ç¨®å£æƒ…ç·’ã€‚</li>
            <li>ç•¶ 6 ç¨®å£æƒ…ç·’éƒ½è¢«å®‰æ’«å®Œï¼Œé­”ç‰©æœƒè®Šå›é–‹å¿ƒå°å¤¥ä¼´ï¼</li>
          </ul>
          <div class="btn-row">
            <a href="#hero" class="btn">ğŸ§’ é¦¬ä¸Šé¸æ“‡å‹‡è€…</a>
          </div>
        </div>
      </section>

      <!-- å‹‡è€…é¸æ“‡ -->
      <section class="section" id="hero">
        <div class="card" id="hero-card">
          <span class="badge">STEP 1 å‹‡è€…ç™»å ´</span>
          <h2>é¸æ“‡ä½ çš„å‹‡è€…å¤¥ä¼´</h2>
          <p style="text-align:center;font-size:0.9rem;color:#666;">
            ä¸åŒå‹‡è€…æœ‰ä¸åŒå¤©è³¦æ‹³èˆ‡å€‹æ€§ï¼Œé¸ä¸€å€‹æœ€åƒä½ çš„è§’è‰²å§ï¼
          </p>
          <div class="hero-grid">
            <button type="button" class="hero-card" data-hero="æˆ°å£«">
              <div class="hero-card-title">ğŸ›¡ï¸ æˆ°å£«ï¼ˆâœŠï¼‰</div>
              <div class="hero-card-line">å‹‡æ•¢ã€æœ‰è²¬ä»»æ„Ÿ</div>
              <div class="hero-card-line">å£é ­ç¦ªï¼šæˆ‘ä¸€å®šæœƒå®ˆè­·å¤§å®¶ï¼</div>
              <div class="hero-card-tag">å‡º âœŠ ä¸¦å‹åˆ© â†’ å‚³é” 2 å€å¥½å¿ƒæƒ…</div>
            </button>
            <button type="button" class="hero-card" data-hero="æ³•å¸«">
              <div class="hero-card-title">ğŸ”® æ³•å¸«ï¼ˆâœŒï¸ï¼‰</div>
              <div class="hero-card-line">è°æ˜ã€æœ‰å‰µæ„</div>
              <div class="hero-card-line">å£é ­ç¦ªï¼šå˜¿å˜¿ï½æˆ‘æœ‰æ–°é»å­ï¼</div>
              <div class="hero-card-tag">å‡º âœŒï¸ ä¸¦å‹åˆ© â†’ å‚³é” 2 å€å¥½å¿ƒæƒ…</div>
            </button>
            <button type="button" class="hero-card" data-hero="ç‰§å¸«">
              <div class="hero-card-title">ğŸ’– ç‰§å¸«ï¼ˆğŸ–ï¼‰</div>
              <div class="hero-card-line">æº«æŸ”ã€å–„è§£äººæ„</div>
              <div class="hero-card-line">å£é ­ç¦ªï¼šåˆ¥æ“”å¿ƒï¼Œæˆ‘ä¾†å¹«ä½ ï½</div>
              <div class="hero-card-tag">å‡º ğŸ– ä¸¦å‹åˆ© â†’ å‚³é” 2 å€å¥½å¿ƒæƒ…</div>
            </button>
            <button type="button" class="hero-card" data-hero="å‹‡æ•¢çš„æ‘æ°‘">
              <div class="hero-card-title">ğŸŒ¾ å‹‡æ•¢çš„æ‘æ°‘ï¼ˆä»»æ„ï¼‰</div>
              <div class="hero-card-line">æ¨¸å¯¦ã€å …æ¯…</div>
              <div class="hero-card-line">å£é ­ç¦ªï¼šæˆ‘é›–ç„¶å¹³å‡¡ï¼Œä½†ä¸æ”¾æ£„ï¼</div>
              <div class="hero-card-tag">é­”ç‹æˆ°ä½¿ç”¨ä»»æ„æ˜Ÿæ˜Ÿ â†’ è¼¸äº†ä¹Ÿä¸å—å£æƒ…ç·’å½±éŸ¿</div>
            </button>
          </div>
          <div class="hero-summary" id="hero-info">
            ğŸ‘‰ è«‹å…ˆé»é¸ä¸Šé¢çš„å‹‡è€…å¡ç‰‡ã€‚
          </div>
          <div class="btn-row">
            <a href="#battle" class="btn btn-secondary">å‰å¾€ ğŸ‘¾ é­”ç‰©æˆ°é¬¥å€</a>
          </div>
        </div>
      </section>

      <!-- é­”ç‰©æˆ°é¬¥ -->
      <section class="section" id="battle">
        <div class="card" id="battle-card">
          <span class="badge">STEP 2 é­”ç‰©æˆ°é¬¥</span>
          <h2>å‹‡è€…çŒœæ‹³å°æŠ—å£æƒ…ç·’é­”ç‰©</h2>

          <div class="bear-tip">
            <div class="bear-avatar">ğŸ»</div>
            <div class="bear-bubble" id="bear-tip-text">
              æ‘é•·ç†Šç†Šï¼šå…ˆé¸ä¸€ä½å‹‡è€…ï¼Œå†ç”¨å‰ªåˆ€çŸ³é ­å¸ƒä¾†è·Ÿé­”ç‰©äº’å‹•å§ï¼
            </div>
          </div>

          <p id="monster-name" style="text-align:center;margin-bottom:4px;">
            ğŸ‘¾ ç›®å‰é­”ç‰©ï¼šç”Ÿæ°£å²èŠå§†
          </p>

          <!-- å£æƒ…ç·’é€²åº¦æ¢ -->
          <div class="emotion-steps" id="emotion-steps"></div>

          <div class="status-row">
            <span>å‹‡è€…å¿ƒæƒ…ï¼š<span id="hero-mood" class="mood-good">ğŸ’– è‰¯å¥½</span></span>
            <span>å·²å®‰æ’«ï¼š<span id="calm-count">0</span> / 6</span>
          </div>

          <div class="btn-row" style="margin-top:10px;">
            <button class="btn" data-hand="âœŠ">âœŠ çŸ³é ­</button>
            <button class="btn" data-hand="âœŒï¸">âœŒï¸ å‰ªåˆ€</button>
            <button class="btn" data-hand="ğŸ–">ğŸ– å¸ƒ</button>
          </div>

          <div class="btn-row">
            <button class="btn btn-secondary" id="btn-cheer">ğŸ’« ä½¿ç”¨å‹‡æ°£æ˜Ÿæ˜Ÿèªå¥</button>
            <button class="btn btn-ghost" id="btn-reset">ğŸ” é‡æ–°é–‹å§‹</button>
          </div>

          <div class="log" id="log-box"></div>
        </div>

        <!-- å®¶é•·å°è®€ -->
        <div class="card">
          <span class="badge">å®¶é•·å°è®€</span>
          <h3>é€™å€‹å°éŠæˆ²å¯ä»¥ç·´ç¿’ä»€éº¼ï¼Ÿ</h3>
          <ul class="list">
            <li>ç”¨ã€Œèªå¥ã€èªªå‡ºæ„Ÿå—ï¼Œè€Œä¸æ˜¯åªçœ‹è¼¸è´ã€‚</li>
            <li>ç†è§£å£æƒ…ç·’ï¼ˆç”Ÿæ°£ã€å®³æ€•ã€å«‰å¦’ã€å­¤å–®â€¦ï¼‰ä¹Ÿå¯ä»¥è¢«å®‰æ’«ã€‚</li>
            <li>é€éçŒœæ‹³ç·´ç¿’ã€Œè¼ªæµã€ã€ã€Œç­‰å¾…ã€èˆ‡ã€Œæ¥å—è¼¸è´ã€ã€‚</li>
          </ul>
          <p style="font-size:0.85rem;color:#666;">
            å»ºè­°å®¶é•·é™ªåŒéŠç©ï¼Œå¯ä»¥è«‹å­©å­è‡ªå·±æƒ³ä¸€æ®µã€Œå®‰æ…°é­”ç‰©çš„è©±ã€ï¼Œç·´ç¿’åŒç†èˆ‡è¡¨é”ã€‚
          </p>
        </div>
      </section>
    </main>

    <!-- åº•éƒ¨å°èˆª -->
    <nav class="bottom-nav">
      <div class="bottom-nav-inner">
        <a href="#home" class="nav-item active" data-target="home">
          <span>ğŸ </span>é¦–é 
        </a>
        <a href="#hero" class="nav-item" data-target="hero">
          <span>ğŸ§’</span>å‹‡è€…
        </a>
        <a href="#battle" class="nav-item" data-target="battle">
          <span>ğŸ‘¾</span>é­”ç‰©æˆ°
        </a>
      </div>
    </nav>
  </div>

  <script>
    // --- å‹‡è€…è³‡æ–™ ---
    const heroes = {
      "æˆ°å£«": {
        punch: "âœŠ",
        text: "å‹‡æ•¢ã€æœ‰è²¬ä»»æ„Ÿï¼šã€Œæˆ‘ä¸€å®šæœƒå®ˆè­·å¤§å®¶ï¼ã€",
      },
      "æ³•å¸«": {
        punch: "âœŒï¸",
        text: "è°æ˜ã€æœ‰å‰µæ„ï¼šã€Œå˜¿å˜¿ï½æˆ‘æœ‰æ–°é»å­ï¼ã€",
      },
      "ç‰§å¸«": {
        punch: "ğŸ–",
        text: "æº«æŸ”ã€å–„è§£äººæ„ï¼šã€Œåˆ¥æ“”å¿ƒï¼Œæˆ‘ä¾†å¹«ä½ ï½ã€",
      },
      "å‹‡æ•¢çš„æ‘æ°‘": {
        punch: "ä»»æ„",
        text: "æ¨¸å¯¦ã€å …æ¯…ï¼šã€Œæˆ‘é›–ç„¶å¹³å‡¡ï¼Œä½†ä¸æ”¾æ£„ï¼ã€",
      },
    };

    const badEmotions = ["ç”Ÿæ°£", "å®³æ€•", "å«‰å¦’", "å­¤å–®", "æ²®å–ª", "ç–²ç´¯"];

    const cheerSentences = [
      "ã€Œæˆ‘åœ¨é€™è£¡è½ä½ èªªï¼Œä¸ç”¨ä¸€å€‹äººæ‰›ã€‚ã€",
      "ã€Œç”Ÿæ°£æ²’é—œä¿‚ï¼Œæˆ‘å€‘ä¸€èµ·æ‰¾æ–¹æ³•ã€‚ã€",
      "ã€Œä½ å¾ˆé‡è¦ï¼Œä¹Ÿå€¼å¾—è¢«å¥½å¥½å°å¾…ã€‚ã€",
      "ã€Œå®³æ€•çš„æ™‚å€™ï¼Œå¯ä»¥å…ˆæ·±å‘¼å¸ä¸‰æ¬¡ã€‚ã€",
      "ã€Œå¤±æ•—åªæ˜¯æš«åœï¼Œä¸æ˜¯çµæŸã€‚ã€",
      "ã€Œè¬è¬ä½ é¡˜æ„æŠŠå¿ƒæƒ…èªªå‡ºä¾†ã€‚ã€"
    ];

    let currentHero = null;
    let calmCount = 0;
    let currentEmotionIndex = 0;

    const heroInfoEl = document.getElementById("hero-info");
    const heroMoodEl = document.getElementById("hero-mood");
    const calmCountEl = document.getElementById("calm-count");
    const monsterNameEl = document.getElementById("monster-name");
    const logBox = document.getElementById("log-box");
    const bearTipEl = document.getElementById("bear-tip-text");
    const emotionStepsEl = document.getElementById("emotion-steps");

    // å»ºç«‹å£æƒ…ç·’å°åœ“é»
    function renderEmotionSteps() {
      emotionStepsEl.innerHTML = "";
      badEmotions.forEach((emo, idx) => {
        const step = document.createElement("div");
        step.className = "emotion-step";
        const dot = document.createElement("div");
        dot.className = "emotion-dot";
        const label = document.createElement("div");
        label.className = "emotion-label";
        label.textContent = emo;
        step.appendChild(dot);
        step.appendChild(label);
        emotionStepsEl.appendChild(step);
      });
      updateEmotionSteps();
    }

    function updateEmotionSteps() {
      const steps = emotionStepsEl.querySelectorAll(".emotion-step");
      steps.forEach((step, idx) => {
        step.classList.remove("current", "done");
        if (idx < calmCount) {
          step.classList.add("done");
        } else if (idx === currentEmotionIndex) {
          step.classList.add("current");
        }
      });
    }

    function log(text, type = "system") {
      const p = document.createElement("p");
      p.textContent = text;
      p.classList.add(type);
      logBox.appendChild(p);
      logBox.scrollTop = logBox.scrollHeight;
    }

    // å‹‡è€…é¸æ“‡
    const heroCards = document.querySelectorAll(".hero-card");
    heroCards.forEach(card => {
      card.addEventListener("click", () => {
        const heroName = card.dataset.hero;
        currentHero = heroName;
        heroCards.forEach(c => c.classList.remove("selected"));
        card.classList.add("selected");

        const info = heroes[heroName];
        heroInfoEl.textContent = `ä½ é¸æ“‡äº†ã€${heroName}ã€‘ã€‚å¤©è³¦æ‹³ï¼š${info.punch}ï¼›å€‹æ€§ï¼š${info.text}`;
        bearTipEl.textContent = `æ‘é•·ç†Šç†Šï¼šå¤ªå¥½äº†ï¼Œå°å‹‡è€…ã€Œ${heroName}ã€æº–å‚™å‡ºç™¼ï¼ç¾åœ¨å¯ä»¥åˆ°ä¸‹æ–¹çš„é­”ç‰©æˆ°å€ï¼Œç”¨å‰ªåˆ€çŸ³é ­å¸ƒä¾†å®‰æ’«å£æƒ…ç·’å›‰ï½`;

        logBox.innerHTML = "";
        heroMoodEl.textContent = "ğŸ’– è‰¯å¥½";
        heroMoodEl.classList.remove("mood-bad");
        heroMoodEl.classList.add("mood-good");
        calmCount = 0;
        currentEmotionIndex = 0;
        calmCountEl.textContent = calmCount.toString();
        monsterNameEl.textContent = `ğŸ‘¾ ç›®å‰é­”ç‰©ï¼š${badEmotions[currentEmotionIndex]}å²èŠå§†`;
        updateEmotionSteps();
        log(`æ‘é•·ç†Šç†Šï¼šå°å‹‡è€…ã€${heroName}ã€‘åŠ å…¥éšŠä¼ï¼`, "system");
      });
    });

    // çŒœæ‹³è¦å‰‡
    function judge(player, enemy) {
      if (player === enemy) return "draw";
      if (
        (player === "âœŠ" && enemy === "âœŒï¸") ||
        (player === "âœŒï¸" && enemy === "ğŸ–") ||
        (player === "ğŸ–" && enemy === "âœŠ")
      ) {
        return "win";
      }
      return "lose";
    }

    function randomHand() {
      const hands = ["âœŠ", "âœŒï¸", "ğŸ–"];
      return hands[Math.floor(Math.random() * hands.length)];
    }

    // çŒœæ‹³æŒ‰éˆ•
    document.querySelectorAll("#battle-card .btn").forEach(btn => {
      const hand = btn.dataset.hand;
      if (!hand) return;
      btn.addEventListener("click", () => {
        if (!currentHero) {
          alert("è«‹å…ˆåˆ°ä¸Šæ–¹å€å¡Šé¸æ“‡ä¸€ä½å°å‹‡è€…ã€‚");
          return;
        }
        const playerHand = hand;
        const enemyHand = randomHand();
        const result = judge(playerHand, enemyHand);
        const emotion = badEmotions[currentEmotionIndex];

        if (result === "win") {
          log(`ä½ å‡ºäº† ${playerHand}ï¼Œé­”ç‰©å‡ºäº† ${enemyHand}ã€‚ä½ è´äº†ï¼å®‰æ’«äº†ã€Œ${emotion}ã€çš„æƒ…ç·’ã€‚`, "hero");
          calmCount++;
          calmCountEl.textContent = calmCount.toString();
          heroMoodEl.textContent = "ğŸ’– è‰¯å¥½";
          heroMoodEl.classList.add("mood-good");
          heroMoodEl.classList.remove("mood-bad");

          if (calmCount >= badEmotions.length) {
            log(`âœ¨ ${emotion}å²èŠå§†æ„Ÿå—åˆ°æ»¿æ»¿çš„é—œå¿ƒï¼Œæ‰€æœ‰å£æƒ…ç·’éƒ½è¢«å¥½å¥½çœ‹è¦‹ä¸¦å®‰æ’«äº†ï¼`, "system");
            monsterNameEl.textContent = "ğŸ‰ é­”ç‰©å·²å…¨éƒ¨è¢«å®‰æ’«ï¼Œæ­å–œå°å‹‡è€…é€šé—œï¼";
            bearTipEl.textContent = "æ‘é•·ç†Šç†Šï¼šå¤ªæ£’äº†ï¼ä½ ç”¨è€å¿ƒå’Œæº«æŸ”ï¼ŒæˆåŠŸé™ªä¼´é­”ç‰©èµ°éå£æƒ…ç·’ã€‚ä»Šå¤©ä¹Ÿè¾›è‹¦ä½ å•¦ï½";
            currentEmotionIndex = badEmotions.length - 1;
          } else {
            currentEmotionIndex = calmCount;
            monsterNameEl.textContent = `ğŸ‘¾ ä¸‹ä¸€å€‹å£æƒ…ç·’ï¼š${badEmotions[currentEmotionIndex]}å²èŠå§†`;
            bearTipEl.textContent = `æ‘é•·ç†Šç†Šï¼šæ¥ä¸‹ä¾†è¼ªåˆ°ã€Œ${badEmotions[currentEmotionIndex]}ã€çš„æƒ…ç·’äº†ï¼Œæˆ‘å€‘æ…¢æ…¢é™ªå®ƒå°±å¥½ï½`;
          }
          updateEmotionSteps();
        } else if (result === "draw") {
          log(`ä½ å‡ºäº† ${playerHand}ï¼Œé­”ç‰©å‡ºäº† ${enemyHand}ã€‚å¹³æ‰‹ï½å¯ä»¥å†è©¦ä¸€æ¬¡ã€‚`, "system");
        } else {
          log(`ä½ å‡ºäº† ${playerHand}ï¼Œé­”ç‰©å‡ºäº† ${enemyHand}ã€‚é€™å›åˆé­”ç‰©æ¯”è¼ƒæ¿€å‹•ã€‚`, "monster");
          heroMoodEl.textContent = "ğŸ’” éœ€è¦èª¿æ•´å¿ƒæƒ…";
          heroMoodEl.classList.remove("mood-good");
          heroMoodEl.classList.add("mood-bad");
          bearTipEl.textContent = "æ‘é•·ç†Šç†Šï¼šè¼¸äº†ä¹Ÿæ²’é—œä¿‚ï¼Œå…ˆæ·±å‘¼å¸ä¸€ä¸‹ï¼Œå†ç”¨å‹‡æ°£æ˜Ÿæ˜Ÿèªå¥å¹«åŠ©è‡ªå·±å’Œé­”ç‰©ã€‚";
        }
      });
    });

    // å‹‡æ°£æ˜Ÿæ˜Ÿèªå¥
    document.getElementById("btn-cheer").addEventListener("click", () => {
      const sentence = cheerSentences[Math.floor(Math.random() * cheerSentences.length)];
      log(`â­ å°å‹‡è€…èªªï¼š${sentence}`, "hero");
      heroMoodEl.textContent = "ğŸ’– èª¿æ•´å®Œç•¢";
      heroMoodEl.classList.add("mood-good");
      heroMoodEl.classList.remove("mood-bad");
      bearTipEl.textContent = "æ‘é•·ç†Šç†Šï¼šå¥½æ£’çš„èªå¥ï¼ç•¶æˆ‘å€‘é¡˜æ„èªªå‡ºé—œå¿ƒï¼Œé­”ç‰©å’Œè‡ªå·±éƒ½æœƒæ¯”è¼ƒè¼•é¬†ã€‚";
    });

    // é‡æ–°é–‹å§‹
    document.getElementById("btn-reset").addEventListener("click", () => {
      currentHero = null;
      heroCards.forEach(c => c.classList.remove("selected"));
      heroInfoEl.textContent = "ğŸ‘‰ è«‹å…ˆé»é¸ä¸Šé¢çš„å‹‡è€…å¡ç‰‡ã€‚";
      logBox.innerHTML = "";
      heroMoodEl.textContent = "ğŸ’– è‰¯å¥½";
      heroMoodEl.classList.add("mood-good");
      heroMoodEl.classList.remove("mood-bad");
      calmCount = 0;
      currentEmotionIndex = 0;
      calmCountEl.textContent = calmCount.toString();
      monsterNameEl.textContent = "ğŸ‘¾ ç›®å‰é­”ç‰©ï¼šç”Ÿæ°£å²èŠå§†";
      bearTipEl.textContent = "æ‘é•·ç†Šç†Šï¼šå…ˆé¸ä¸€ä½å‹‡è€…ï¼Œå†ç”¨å‰ªåˆ€çŸ³é ­å¸ƒä¾†è·Ÿé­”ç‰©äº’å‹•å§ï¼";
      updateEmotionSteps();
      log("æ‘é•·ç†Šç†Šï¼šé‡æ–°å‡ºç™¼ï¼é€™æ¬¡æœƒé‡åˆ°ä¸ä¸€æ¨£çš„å¿ƒæƒ…å–”ï½", "system");
    });

    // åº•éƒ¨å°èˆª active ç‹€æ…‹
    const navItems = document.querySelectorAll(".nav-item");
    navItems.forEach(item => {
      item.addEventListener("click", () => {
        navItems.forEach(i => i.classList.remove("active"));
        item.classList.add("active");
      });
    });

    // åˆå§‹åŒ–
    renderEmotionSteps();
    log("æ‘é•·ç†Šç†Šï¼šæ­¡è¿ä¾†åˆ°æ˜Ÿæ˜Ÿç‹åœ‹ï½é»é¸ä¸Šæ–¹ã€Œå‹‡è€…ã€å…ˆé¸è§’è‰²ï¼Œæˆ–è€…ç›´æ¥æ»‘åˆ°é­”ç‰©æˆ°å€é–‹å§‹å†’éšªï¼", "system");
  </script>
</body>
</html>